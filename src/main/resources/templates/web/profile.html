<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org" th:replace="~{layouts/layout :: layout(~{::title}, ~{::content})}">
<head>
    <title>Hồ sơ cá nhân - Video Platform</title>
</head>
<body>
    <div th:fragment="content">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-8 col-md-10 col-sm-12">
                    <div class="card profile-card">
                        <div class="card-header">
                            <h3 class="mb-0">
                                <i class="bi bi-person-circle me-2"></i>Hồ sơ cá nhân
                            </h3>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-4 text-center">
                                    <div class="profile-avatar">
                                        <div class="user-avatar mx-auto">
                                            <img th:if="${user.avatar != null and !user.avatar.isEmpty()}" 
                                                 th:src="${user.avatar.startsWith('http') ? user.avatar : '/images/' + user.avatar}" 
                                                 class="rounded-circle" 
                                                 style="width: 120px; height: 120px; object-fit: cover; border: 3px solid #dee2e6;"
                                                 alt="Avatar"
                                                 onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                                            <div class="avatar-placeholder rounded-circle d-none align-items-center justify-content-center" 
                                                 style="width: 120px; height: 120px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; font-size: 48px; font-weight: bold; border: 3px solid #dee2e6;">
                                                <span th:text="${#strings.substring(user.fullName, 0, 1).toUpperCase()}">U</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-8">
                                    <div class="profile-info">
                                        <div class="row mb-3">
                                        <div class="col-sm-3">
                                            <strong>Họ và tên:</strong>
                                        </div>
                                        <div class="col-sm-9">
                                            <span th:text="${user.fullName}">Nguyễn Văn A</span>
                                        </div>
                                    </div>
                                    <div class="row mb-3">
                                        <div class="col-sm-3">
                                            <strong>Tên đăng nhập:</strong>
                                        </div>
                                        <div class="col-sm-9">
                                            <span th:text="${user.userName}">user</span>
                                        </div>
                                    </div>
                                    <div class="row mb-3">
                                        <div class="col-sm-3">
                                            <strong>Email:</strong>
                                        </div>
                                        <div class="col-sm-9">
                                            <span th:text="${user.email}">user@example.com</span>
                                        </div>
                                    </div>
                                    <div class="row mb-3">
                                        <div class="col-sm-3">
                                            <strong>Số điện thoại:</strong>
                                        </div>
                                        <div class="col-sm-9">
                                            <span th:text="${user.phone}">0987654321</span>
                                        </div>
                                    </div>
                                    <div class="row mb-3">
                                        <div class="col-sm-3">
                                            <strong>Vai trò:</strong>
                                        </div>
                                        <div class="col-sm-9">
                                            <span class="badge bg-primary" th:text="${user.role.roleName}">USER</span>
                                        </div>
                                    </div>
                                    <div class="row mb-3">
                                        <div class="col-sm-3">
                                            <strong>Ngày tạo:</strong>
                                        </div>
                                        <div class="col-sm-9">
                                            <span th:text="${#dates.format(user.createdDate, 'dd/MM/yyyy HH:mm')}">01/01/2024 10:00</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="profile-actions">
                                <div class="d-flex gap-2 flex-wrap justify-content-center">
                                        <a href="/profile/my-videos" class="btn btn-primary">
                                            <i class="bi bi-collection-play me-2"></i>Video của tôi
                                        </a>
                                        <a th:if="${user.role.roleName == 'ADMIN'}" href="/admin" class="btn btn-success">
                                            <i class="bi bi-gear me-2"></i>Quản trị
                                        </a>
                                        <a href="/" class="btn btn-outline-secondary">
                                            <i class="bi bi-house me-2"></i>Trang chủ
                                        </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
